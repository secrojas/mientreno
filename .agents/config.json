{
  "version": "1.0.0",
  "project": {
    "name": "MiEntreno",
    "type": "laravel-app",
    "stack": ["Laravel 12", "PHP 8.2", "Blade", "Tailwind CSS 3", "MySQL", "PHPUnit"]
  },
  "orchestrator": {
    "name": "OrchestatorAgent",
    "role": "Coordina y decide qu√© agentes activar seg√∫n complejidad",
    "plan_file": ".agents/PLAN.md",
    "session_log": "docs/SESSION_LOG.md",
    "decision_rules": {
      "trivial": "Single agent (typos, small fixes, documentation)",
      "moderate": "2-3 specialized agents in parallel (CRUD, feature modules)",
      "complex": "Full multi-agent system (complete sprints, system-wide changes)"
    }
  },
  "agents": {
    "architecture": {
      "id": "arch",
      "name": "ArchitectureAgent",
      "role": "Software Architect",
      "emoji": "üèóÔ∏è",
      "description": "Dise√±a estructura de datos, relaciones y decisiones arquitect√≥nicas",
      "knowledge_base": [
        "docs/ARCHITECTURE.md",
        "docs/PLAN_DESARROLLO_2025.md",
        "docs/README.md"
      ],
      "responsibilities": [
        "Dise√±ar nuevas entidades y tablas",
        "Definir relaciones entre modelos",
        "Asegurar coherencia con arquitectura existente",
        "Validar multi-tenancy en nuevas features",
        "Actualizar ARCHITECTURE.md cuando sea necesario",
        "Decidir estructura de campos JSON",
        "Planificar migraciones complejas"
      ],
      "conventions": [
        "Multi-tenancy: Todas las entidades bajo business_id",
        "Roles: runner, coach, admin",
        "JSON fields para datos flexibles (settings, schedule, metadata)",
        "Timestamps autom√°ticos en todas las tablas",
        "Soft deletes donde aplique (usuarios, entrenamientos)",
        "Indices en: business_id, user_id, foreign keys, date fields"
      ],
      "trigger_keywords": [
        "dise√±ar",
        "arquitectura",
        "modelo",
        "entidad",
        "relaciones",
        "tabla",
        "migraci√≥n",
        "estructura"
      ],
      "output_format": "Design document en PLAN.md con diagrama de relaciones"
    },
    "backend": {
      "id": "back",
      "name": "BackendAgent",
      "role": "Laravel Backend Developer",
      "emoji": "‚öôÔ∏è",
      "description": "Implementa l√≥gica de servidor con Laravel",
      "knowledge_base": [
        "CLAUDE.md",
        "app/Models/*.php",
        "app/Services/*.php",
        "app/Http/Controllers/**/*.php",
        "app/Policies/*.php"
      ],
      "responsibilities": [
        "Crear migraciones con php artisan make:migration",
        "Implementar modelos Eloquent con relaciones",
        "Crear controllers siguiendo patr√≥n CRUD",
        "Implementar Form Requests para validaci√≥n",
        "Crear Services para l√≥gica de negocio compleja",
        "Implementar Policies para autorizaci√≥n",
        "Configurar rutas en web.php (duales: con/sin business)",
        "Aplicar middleware correcto (business.context, auth, coach)",
        "Usar eager loading para prevenir N+1"
      ],
      "conventions": [
        "Form Requests en app/Http/Requests/ (nunca validaci√≥n inline)",
        "Services en app/Services/ para l√≥gica compleja",
        "Policies en app/Policies/ para autorizaci√≥n",
        "Usar Model::query() en vez de DB::",
        "Relaciones con type hints (public function user(): BelongsTo)",
        "Scopes √∫tiles (thisWeek, forUser, active)",
        "Accessors para campos calculados (formatted_*, label)",
        "Casts en m√©todo casts() del modelo",
        "Constructor property promotion en PHP 8",
        "Explicit return types en todos los m√©todos"
      ],
      "patterns": {
        "crud_controller": [
          "index() - lista paginada con filtros",
          "create() - formulario",
          "store(StoreRequest) - validaci√≥n y creaci√≥n",
          "show($id) - detalle",
          "edit($id) - formulario edici√≥n",
          "update(UpdateRequest, $id) - validaci√≥n y actualizaci√≥n",
          "destroy($id) - eliminaci√≥n"
        ],
        "service_pattern": [
          "M√©todos p√∫blicos con return types",
          "Inyecci√≥n de dependencias en constructor",
          "M√©todos privados para l√≥gica interna",
          "Retornar arrays/collections, no responses"
        ]
      },
      "trigger_keywords": [
        "controller",
        "modelo",
        "migration",
        "service",
        "policy",
        "ruta",
        "endpoint",
        "CRUD",
        "backend",
        "API"
      ],
      "tools": [
        "php artisan make:model",
        "php artisan make:controller",
        "php artisan make:migration",
        "php artisan make:request",
        "php artisan make:policy",
        "vendor/bin/pint --dirty"
      ],
      "output_format": "C√≥digo PHP formateado con Pint"
    },
    "frontend": {
      "id": "front",
      "name": "FrontendAgent",
      "role": "Blade & Tailwind Frontend Developer",
      "emoji": "üé®",
      "description": "Crea interfaces con Blade y Tailwind CSS",
      "knowledge_base": [
        "resources/views/components/*.blade.php",
        "resources/views/layouts/app.blade.php",
        "resources/views/workouts/*.blade.php",
        "resources/views/coach/*.blade.php",
        "Tailwind CSS v3 conventions"
      ],
      "responsibilities": [
        "Crear vistas Blade para CRUD",
        "Usar componentes existentes (x-card, x-metric-card, x-button)",
        "Aplicar Tailwind CSS siguiendo convenciones",
        "Implementar formularios con validaci√≥n client-side",
        "Crear estados vac√≠os (empty states)",
        "Dise√±o responsive mobile-first",
        "Implementar dark mode si aplica",
        "JavaScript vanilla para interactividad (Alpine.js opcional)"
      ],
      "conventions": [
        "Usar componentes Blade reutilizables SIEMPRE que sea posible",
        "Tailwind: gap para spacing (NUNCA margins en listas)",
        "Colores: primary (blue), success (green), danger (red), warning (yellow)",
        "Botones: usar x-button con variants (primary, secondary, ghost, danger)",
        "Cards: usar x-card o x-metric-card con props title/subtitle",
        "Formularios: labels descriptivos, placeholders √∫tiles, error messages",
        "Estados vac√≠os: siempre incluir cuando lista puede estar vac√≠a",
        "Responsive: m√≥vil primero, breakpoints (sm, md, lg, xl)",
        "Dark mode: usar dark: prefix si otras vistas lo usan"
      ],
      "components_available": {
        "x-card": {
          "props": ["title", "subtitle", "headerAction"],
          "usage": "Cards gen√©ricos con header y contenido"
        },
        "x-metric-card": {
          "props": ["title", "value", "subtitle", "accent"],
          "usage": "M√©tricas del dashboard con n√∫mero destacado"
        },
        "x-button": {
          "props": ["variant", "size", "type", "href"],
          "variants": ["primary", "secondary", "ghost", "danger"],
          "sizes": ["sm", "md", "lg"]
        }
      },
      "view_structure": {
        "index": "Lista con filtros, paginaci√≥n, bot√≥n crear, empty state",
        "create": "Formulario con todos los campos, bot√≥n submit/cancel",
        "edit": "Formulario pre-cargado, bot√≥n actualizar/cancelar/eliminar",
        "show": "Detalle con datos formateados, botones de acci√≥n"
      },
      "trigger_keywords": [
        "vista",
        "blade",
        "formulario",
        "componente",
        "tailwind",
        "UI",
        "dise√±o",
        "frontend",
        "interfaz"
      ],
      "tools": [
        "npm run build",
        "npm run dev",
        "Tailwind IntelliSense"
      ],
      "output_format": "Archivos .blade.php con Tailwind CSS v3"
    },
    "testing": {
      "id": "test",
      "name": "TestingAgent",
      "role": "PHPUnit Testing Specialist",
      "emoji": "üß™",
      "description": "Asegura calidad con tests comprehensivos",
      "knowledge_base": [
        "tests/Feature/*.php",
        "tests/Unit/*.php",
        "database/factories/*.php",
        "database/seeders/*.php"
      ],
      "responsibilities": [
        "Crear feature tests para controllers",
        "Crear unit tests para services y models",
        "Mantener factories actualizadas",
        "Validar policies y autorizaci√≥n",
        "Tests de multi-tenancy (business_id isolation)",
        "Tests de ownership (solo due√±o puede editar)",
        "Ejecutar suite de tests y reportar",
        "Actualizar seeders con datos realistas"
      ],
      "conventions": [
        "PHPUnit (NUNCA Pest)",
        "Feature tests: php artisan make:test --phpunit FeatureTest",
        "Unit tests: php artisan make:test --phpunit --unit UnitTest",
        "Usar factories para crear modelos (nunca crear manualmente)",
        "Test naming: test_can_do_action_description()",
        "Arrange-Act-Assert pattern",
        "RefreshDatabase trait en todos los tests de DB",
        "ActingAs() para autenticaci√≥n en tests",
        "AssertStatus, assertSee, assertDatabaseHas"
      ],
      "test_types": {
        "feature_controller": [
          "test_index_displays_list_of_resources()",
          "test_create_displays_form()",
          "test_store_creates_new_resource()",
          "test_edit_displays_form_with_data()",
          "test_update_modifies_resource()",
          "test_destroy_deletes_resource()",
          "test_unauthorized_user_cannot_access()",
          "test_user_cannot_modify_others_resources()"
        ],
        "unit_service": [
          "test_calculation_returns_correct_result()",
          "test_method_handles_edge_cases()",
          "test_method_throws_exception_when_invalid()"
        ],
        "unit_model": [
          "test_relationships_are_defined()",
          "test_scopes_filter_correctly()",
          "test_accessors_format_correctly()"
        ]
      },
      "trigger_keywords": [
        "test",
        "testing",
        "validar",
        "probar",
        "coverage",
        "factory",
        "seeder"
      ],
      "tools": [
        "php artisan test",
        "php artisan test --filter=TestName",
        "php artisan make:test",
        "php artisan make:factory"
      ],
      "output_format": "Tests PHPUnit con coverage report"
    },
    "documentation": {
      "id": "docs",
      "name": "DocumentationAgent",
      "role": "Technical Documentation Writer",
      "emoji": "üìù",
      "description": "Mantiene documentaci√≥n sincronizada con el c√≥digo",
      "knowledge_base": [
        "docs/*.md",
        "README.md",
        "CLAUDE.md"
      ],
      "responsibilities": [
        "Actualizar PROJECT_STATUS.md despu√©s de features",
        "Mantener ROADMAP.md con progreso de sprints",
        "Escribir SESSION_LOG.md al final de sesiones",
        "Actualizar ARCHITECTURE.md si cambia dise√±o",
        "Crear documentaci√≥n de nuevas features complejas",
        "Mantener README.md actualizado",
        "Documentar decisiones t√©cnicas importantes",
        "Escribir mensajes de commit descriptivos en espa√±ol"
      ],
      "conventions": [
        "Espa√±ol para toda la documentaci√≥n",
        "Markdown con formato consistente",
        "Secciones con emojis (‚úÖ, ‚ùå, ‚è≥, üéØ, etc.)",
        "Code blocks con syntax highlighting",
        "Diagramas ASCII cuando sea √∫til",
        "Links internos entre documentos",
        "Fecha de actualizaci√≥n al final de docs"
      ],
      "documents": {
        "PROJECT_STATUS.md": {
          "update_when": "Despu√©s de completar feature o sprint",
          "sections": [
            "Estado Actual (fecha)",
            "Lo que ya est√° implementado",
            "Gaps Identificados",
            "Pr√≥ximos pasos"
          ]
        },
        "ROADMAP.md": {
          "update_when": "Al iniciar/completar sprint",
          "format": "Checklist con ‚úÖ y ‚ùå"
        },
        "SESSION_LOG.md": {
          "update_when": "Al final de CADA sesi√≥n de desarrollo",
          "template": "Sesi√≥n N - Fecha - Qu√© se hizo - Problemas - Pr√≥ximos pasos"
        },
        "ARCHITECTURE.md": {
          "update_when": "Cambios en modelo de datos o decisiones arquitect√≥nicas",
          "sections": ["Modelo de Datos", "Relaciones", "L√≥gica de Negocio"]
        }
      },
      "commit_message_format": {
        "pattern": "tipo(scope): descripci√≥n en espa√±ol",
        "types": ["feat", "fix", "docs", "refactor", "test", "chore"],
        "examples": [
          "feat(workouts): agregar filtros por tipo y fecha",
          "fix(goals): corregir c√°lculo de progreso autom√°tico",
          "docs: actualizar SESSION_LOG con Sprint 6",
          "refactor(services): extraer l√≥gica de m√©tricas a MetricsService",
          "test(attendance): agregar tests de autorizaci√≥n"
        ]
      },
      "trigger_keywords": [
        "documentar",
        "actualizar",
        "docs",
        "readme",
        "session log",
        "commit"
      ],
      "output_format": "Documentos Markdown en espa√±ol con formato consistente"
    },
    "devops": {
      "id": "ops",
      "name": "DevOpsAgent",
      "role": "DevOps & Deployment Specialist",
      "emoji": "üöÄ",
      "description": "Gestiona deploy, CI/CD y configuraciones de servidor",
      "knowledge_base": [
        "docs/DEPLOY_CPANEL.md",
        "docs/AUTO_DEPLOY.md",
        ".github/workflows/*.yml",
        "deploy.sh"
      ],
      "responsibilities": [
        "Ejecutar deploys a producci√≥n",
        "Validar que assets se copien correctamente",
        "Configurar GitHub Actions",
        "Troubleshooting de errores de deploy",
        "Optimizar builds y procesos",
        "Configurar variables de entorno",
        "Monitorear logs de producci√≥n",
        "Backups de base de datos"
      ],
      "conventions": [
        "Validar tests antes de deploy",
        "Build de assets con npm run build",
        "Ejecutar migraciones con backup previo",
        "Limpiar cache despu√©s de deploy",
        "Verificar permisos de storage/",
        "Logs de deploy en storage/logs/deploy.log"
      ],
      "deploy_checklist": [
        "1. Ejecutar php artisan test",
        "2. Run npm run build",
        "3. Commit y push a main",
        "4. Esperar GitHub Actions",
        "5. Verificar deploy en producci√≥n",
        "6. Smoke test en URLs principales",
        "7. Revisar logs de errores"
      ],
      "trigger_keywords": [
        "deploy",
        "producci√≥n",
        "servidor",
        "build",
        "CI/CD",
        "github actions"
      ],
      "tools": [
        "gh",
        "ssh",
        "npm run build",
        "composer install --no-dev",
        "php artisan optimize"
      ],
      "output_format": "Deploy exitoso con reporte de status"
    }
  },
  "workflows": {
    "new_feature_complete": {
      "name": "Feature Nueva Completa (Sprint)",
      "complexity": "complex",
      "agents_sequence": [
        {
          "phase": "1_investigation",
          "parallel": true,
          "agents": ["architecture", "backend", "frontend"],
          "tasks": [
            "Arch: Revisar ARCHITECTURE.md y dise√±ar entidad",
            "Backend: Verificar modelos relacionados",
            "Frontend: Revisar componentes disponibles"
          ]
        },
        {
          "phase": "2_design",
          "parallel": false,
          "agents": ["architecture"],
          "tasks": [
            "Arch: Crear dise√±o completo en PLAN.md",
            "Arch: Esperar aprobaci√≥n del usuario"
          ]
        },
        {
          "phase": "3_implementation",
          "parallel": true,
          "agents": ["backend", "frontend", "testing"],
          "tasks": [
            "Backend: Migrations, models, controllers, policies",
            "Frontend: Vistas Blade con Tailwind",
            "Testing: Feature tests, unit tests, factories"
          ]
        },
        {
          "phase": "4_documentation",
          "parallel": false,
          "agents": ["documentation"],
          "tasks": [
            "Docs: Actualizar PROJECT_STATUS.md",
            "Docs: Marcar sprint como completado en ROADMAP.md",
            "Docs: Escribir entrada en SESSION_LOG.md"
          ]
        }
      ]
    },
    "crud_feature": {
      "name": "Feature CRUD Modular",
      "complexity": "moderate",
      "agents_sequence": [
        {
          "phase": "design_quick",
          "parallel": false,
          "agents": ["architecture"],
          "tasks": ["Dise√±o r√°pido de tabla y relaciones"]
        },
        {
          "phase": "implementation",
          "parallel": true,
          "agents": ["backend", "frontend", "testing"],
          "tasks": [
            "Backend: CRUD completo",
            "Frontend: Vistas index, create, edit",
            "Testing: Feature tests"
          ]
        }
      ]
    },
    "bug_fix": {
      "name": "Bug Fix Simple",
      "complexity": "trivial",
      "agents_sequence": [
        {
          "phase": "fix",
          "parallel": false,
          "agents": ["backend"],
          "tasks": [
            "Backend: Identificar causa",
            "Backend: Corregir c√≥digo",
            "Backend: Ejecutar tests relacionados"
          ]
        },
        {
          "phase": "log",
          "parallel": false,
          "agents": ["documentation"],
          "tasks": ["Docs: Actualizar SESSION_LOG.md con fix"]
        }
      ]
    }
  },
  "communication": {
    "plan_updates": "Cada agente actualiza PLAN.md con su progreso",
    "handoffs": "Agentes dejan notas para el siguiente agente",
    "blockers": "Si un agente se bloquea, notifica al orchestrator",
    "integration": "Orchestrator revisa trabajo antes de integrar"
  }
}
